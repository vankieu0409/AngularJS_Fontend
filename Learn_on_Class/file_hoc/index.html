<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="lib/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="lib/custom/app.css">
</head>

<body ng-app="asm1">


  <div class="container">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="#!/">Trang chủ</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#!/khoa-hoc">Khóa học</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#!/gioi-thieu">Giới thiệu</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#!/lien-he">Liên hệ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#!/hoi-dap">Hỏi đáp</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#!/dang-nhap">Đăng nhập</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div ng-view></div>
  </div>

  <script src="lib/bootstrap/js/bootstrap.min.js"></script>
  <script src="lib/angular/angular.min.js"></script>
  <script src="lib/angular-route/angular-route.min.js"></script>
  <script src="lib/db/Subjects.js"></script>
  <script src="lib/db/Quizs/ADAV.js"></script>
  <script>
    var app = angular.module('asm1', ['ngRoute']);
    app.config(function ($routeProvider) {
      $routeProvider
        .when("/", {
          templateUrl: "screens/homepage.html",
          controller: "HomeController"
        })
        .when("/kiem-tra/:subjectId", {
          templateUrl: "screens/kiem-tra.html",
          controller: "TestProcessController"
        })
        .when("/hoi-dap", {
          templateUrl: "screens/hoi-dap.html",
          controller: "QnAController"
        })
        .otherwise({
          template: "<h2>Đường dẫn không tồn tại</h2>"
        })
    });

    app.controller("HomeController", function ($scope, $http) {
      $scope.subjects = [];
      $http.get('lib/db/Subjects.js')
        .then(function (response) {
          console.log(response);
          if (response.statusText == "OK") {
            $scope.subjects = response.data;
          }
        });
    });
    app.controller("TestProcessController", function ($scope, $routeParams, $http) {
      $scope.questions = [];
      $http.get('lib/db/Quizs/' + $routeParams.subjectId + '.js')
        .then(function (response) {
          console.log(response);
          if (response.statusText == "OK") {
            for (let index = 0; index < 10; index++) {
              var item = response.data[Math.floor(Math.random() * response.data.length)];
              $scope.questions.push(item);
            }
            console.log($scope.questions);
          }
        })
    });
    app.controller("QnAController", function ($scope, $routeParams, $interval, $location, $window) {
      $scope.time = new Date();
      //console.log($location);
      console.log($window);
      $interval(function () {
        $scope.time = new Date();
      }, 1000);
      $scope.backtohome = function () {
        $location.path("/");
      }

    });
  </script>
</body>

</html>