<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="lib/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="lib/custom/app.css">
</head>

<body ng-app="asm1">


  <div class="container">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="#!/">Trang chủ</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#!/khoa-hoc">Khóa học</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#!/gioi-thieu">Giới thiệu</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#!/lien-he">Liên hệ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#!/hoi-dap">Hỏi đáp</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#!/dang-nhap">Đăng nhập</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div ng-view></div>
  </div>

  <script src="lib/bootstrap/js/bootstrap.min.js"></script>
  <script src="lib/angular/angular.min.js"></script>
  <script src="lib/angular-route/angular-route.min.js"></script>
  <script src="lib/db/Subjects.js"></script>
  <script src="lib/db/Quizs/ADAV.js"></script>
  <script>
     var subjectApiUrl = "http://localhost:3000/subjects";
        var app = angular.module('asm1', ['ngRoute']);
        app.config(function($routeProvider){
            $routeProvider
            .when("/", {
                templateUrl: "screens/homepage.html",
                controller: "HomeController"
            })
            .when("/kiem-tra/:subjectId", {
                templateUrl: "screens/kiem-tra.html",
                controller: "TestProcessController"
            })
            .when("/2", {
                templateUrl: "screens/xanh.html"
            })
            .otherwise({
                template: "<h2>Đường dẫn không tồn tại</h2>"
            })
        });

        app.controller("HomeController", function($scope, $http){
            $scope.subjects = [];
            $scope.keyword = "";

            $scope.changeKeyword = function(){
              $http.get(`${subjectApiUrl}?Name_like=${$scope.keyword}`)
                .then(function(response){
                  if(response.statusText == "OK"){
                    $scope.subjects = response.data;
                  }
                })
            }

            $http.get(subjectApiUrl)
              .then(function(response) {
                console.log(response);
                if(response.statusText == "OK"){
                  $scope.subjects = response.data;
                }
              })
            console.log(2);
        });
        app.controller("TestProcessController", function($scope, $http, $routeParams){
            $scope.apiUrl = "http://localhost:3000";
            $scope.questions = [];
            
            $http.get(`${$scope.apiUrl}/${$routeParams.subjectId}`)
              .then(response => {
                  if(response.statusText == "OK"){
                    $scope.questions = response.data;
                    }
                })
            // $scope.subjects = GlobalSubjects;
            // $scope.quizs = eval($routeParams.subjectId + "Questions");
            console.log($routeParams.subjectId);
        });
  </script>
</body>

</html>